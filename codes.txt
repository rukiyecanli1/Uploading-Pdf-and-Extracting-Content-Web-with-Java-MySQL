/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package folder2;

/**
 *
 * @author Lenovo
 */
public class NewClass {
    public static void main(String[] args){
    pdfveri a=new pdfveri();
    yonetici b=new yonetici();
    b.setIsim("sevinc ilhan omurca");
    a.setDanisman(b.getIsim());
    a.setSorgutipi("yazar");
    a.setSorgu1veri("huseyin dalyan");
 //System.out.println(a.sorgu2("2018-2019 Güz Dönemi","huseyin dalyan"," arastirma problemleri"));
 
 
      
    System.out.println(a.sorgu1("sevinç ilhan omurca","donem","2018")[1]);
    
    }
}


/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package folder2;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.text.PDFTextStripper;



/**
 *
 * @author Lenovo
 */
public class pdfreader {
     static String yazarAd = "";
    static String yazarNo = "";
    static String yazarOgretimTuru = "";
    static String dersAd = "";
    static String projeBaslik = "";
    static String projeOzet = "";
    static String anahtarKelimeler = "";
    static String danismanAd = "";
    static String danismanUnvan = "";
    static String juri1Ad = "";
    static String juri1Unvan = "";
    static String juri2Ad = "";
    static String juri2Unvan = "";
    static String teslimTarihi = "";
    static String teslimDonemi = "";
    static String anahtarkelimeler[] = new String[6];

    public static void pdfoku(String dosyaAdi) throws FileNotFoundException, IOException, SQLException {

       
        File file = new File("C://Users//Lenovo//Documents//NetBeansProjects//WebApplication1//web//" + dosyaAdi);

        //Instantiate PDFTextStripper class
        try (PDDocument document = PDDocument.load(file)) {
            //Instantiate PDFTextStripper class
            PDFTextStripper pdfStripper = new PDFTextStripper();
            //Retrieving text from PDF document
            String text = pdfStripper.getText(document);
            String toLowerCase = text.toLowerCase();
            //  System.out.println(toLowerCase);
            String[] lines = toLowerCase.split("\r\n|\r|\n");
            int count = 1;   //Just to indicate line number
            for (String temp : lines) {
                temp=temp.replace('ş','s');
                 temp=temp.replace('ı','i');
                System.out.println(count + " " + temp);
                if (count == 36) {
                    dersAd = temp;
                    System.out.println("dersadi: " + dersAd);
                   
                } else if (count == 40) {
                    projeBaslik = temp;
                    temp = lines[40]; // 41.satırdaki başlık kelimeleri
                    if (temp.isEmpty()) {
                        projeBaslik = projeBaslik;
                    } else {
                        projeBaslik = projeBaslik + " " + temp;
                    }
                    System.out.println("projeBasligi: " + projeBaslik);
                } else if (count == 46) {
                    yazarAd = temp;
                    System.out.println("yazarAd: " + yazarAd);
                } else if (count == 47) {
                    yazarNo = temp;
                    System.out.println("yazarNo: " + yazarNo);
                } else if (count == 48) {
                    yazarOgretimTuru = temp;
                    System.out.println("yazarOgrTuru: " + yazarOgretimTuru);
                } else if (count == 54) {
                    String[] res = temp.split("[.]", 0);
                    danismanUnvan = res[0] + ". " + res[1] + ".";
                    if (res[2].startsWith(" üyesi")) {
                        danismanUnvan = res[0] + ". " + res[1] + "." + " " + "uyesi";
                        String[] res2 = res[2].split("[ ]", 0);
                        for (int k = 2; k < res.length + 1; k++) {
                            danismanAd = danismanAd + res2[k] + " ";
                        }
                    } else {
                        danismanAd = res[2];
                    }
                    System.out.println("danismanUnvan: " + danismanUnvan);
                    System.out.println("danismanAd: " + danismanAd);
                } else if (count == 56) {
                    String[] res = temp.split("[.]", 0);
                    juri1Unvan = res[0] + ". " + res[1] + ".";
                    if (res[2].startsWith(" üyesi")) {
                        juri1Unvan = res[0] + ". " + res[1] + "." + " " + "uyesi ";
                        String[] res2 = res[2].split("[ ]", 0);
                        for (int k = 2; k < res.length + 1; k++) {
                            juri1Ad = juri1Ad + res2[k] + " ";
                        }
                    } else {
                        juri1Ad = res[2];
                    }
                    System.out.println("juri1Unvan: " + juri1Unvan);
                    System.out.println("juri1Ad: " + juri1Ad);
                } else if (count == 58) {
                    String[] res = temp.split("[.]", 0);
                    juri2Unvan = res[0] + ". " + res[1] + ".";
                    if (res[2].startsWith(" üyesi")) {
                        juri2Unvan = res[0] + ". " + res[1] + "." + " " + "uyesi ";
                        String[] res2 = res[2].split("[ ]", 0);
                        for (int k = 2; k < res.length + 1; k++) {
                            juri2Ad = juri2Ad + res2[k] + " ";
                        }
                    } else {
                        juri2Ad = res[2];
                    }
                    System.out.println("juri2Unvan: " + juri2Unvan);
                    System.out.println("juri2Ad: " + juri2Ad);
                } else if (count == 61) {
                    /* Pattern regex = Pattern.compile("\\:(\\S+)");
                     Matcher match = regex.matcher(temp);
                     if (match.find()) {
                     System.out.println(match.group(1));
                     }*/
                    String[] res = temp.split("[:]", 0);
                    teslimTarihi = res[1];
                    System.out.println(teslimTarihi);
                    String[] result = teslimTarihi.split("[.]", 0); // 01 06 2018 diye ayırıyor
                    for (String myStr : result) {
                        result[2] = result[2].split("\\ ")[0];  //2018'in yanındaki boşluğu kaldırıyor
                        if (Integer.parseInt(result[1]) < 3 /*ay kontrolü*/) {
                            teslimDonemi = result[2] + "-" + (Integer.parseInt(result[2]) + 1) + " Güz Dönemi";
                        } else {
                            teslimDonemi = ((Integer.parseInt(result[2])) - 1) + "-" + result[2] + " Bahar Dönemi";
                        }

                    }
                    System.out.println("teslimDonemi: " + teslimDonemi);
                }

                if ("özet ".equals(temp)) {

                    System.out.println("özet bulundu");
                    System.out.println("count1:" + count);
                    while (!lines[count].contains("anahtar kelimeler:")) {

                            projeOzet = projeOzet + "\n" + lines[count];
                        //   System.out.println("count:"+count);
                        count++;
                    }
                    System.out.println("count2" + count);
                    // System.out.println("döngüden çıktı");
                    System.out.println("projeOzet: " + projeOzet);
                    // System.out.println("count anahtar kelimeler:"+(count+1));
                    String res0[] = lines[count].split("[:]", 0); // anahtar keliemeler ":"
                    temp = res0[1];
                    String akelimeler;
                    if (lines[count + 1].contains(".")) {     // eğer anahtar kelimeler 2 satırdan oluşuyorsa
                        akelimeler = temp + lines[count + 1];
                    } else {                               // eğer anahtar kelimeler tek satırdan oluşuyorsa
                        akelimeler = temp;
                    }

                    //  System.out.println("akelimeler: "+akelimeler); //burasi doğru çalışıyor
                    System.out.print("anahtarKelimeler: ");
                    String[] res = akelimeler.split("[,]", 0);  // anahtar kelimeleri ","e göre ayırıyor
                       /*  for (int a = 0; a < res.length; a++) {
                     System.out.print(res[a]+" ");
                     }*/
                    for (int a = 0; a < res.length; a++) {
                        res[res.length - 1] = res[res.length - 1].split("\\.")[0];  // sondaki "."yı kaldırıyor
                        // anahtarkelimeler[a] = res[a].split("\\ ")[0];
                        anahtarkelimeler[a] = res[a];
                        System.out.print(anahtarkelimeler[a] + " ");
                    }
                    System.out.println("count:" + count);
                }

                if ("giriş  ".equals(temp) || "giriş ".equals(temp) ) {
                    System.out.println("dosya kapatıldı.");
                    break;
                }

                count++;
            }
            //Closing the document

            document.close();
        }
veritabankatman dbk = new veritabankatman();
        Connection conn = dbk.baglan();
        
            String sql = " insert into pdfBilgiler(yazarAd,yazarNo, yazarOgretimTuru, "
         + "dersAd, projeBaslik, teslimDonemi, projeOzet,"
         + "danismanUnvan, danismanAd, juri1Unvan, juri1Ad,"
         + "juri2Unvan, juri2Ad, anahtar1, anahtar2, anahtar3, anahtar4, anahtar5,anahtar6,pdfad)"
         + "values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

         PreparedStatement state = conn.prepareStatement(sql);
         state.setString(1, yazarAd);
         state.setString(2, yazarNo);
         state.setString(3, yazarOgretimTuru);
         state.setString(4, dersAd);
         state.setString(5, projeBaslik);
         state.setString(6, teslimDonemi );
         state.setString(7, projeOzet);
         state.setString(8, danismanUnvan);
         state.setString(9, danismanAd);
         state.setString(10, juri1Unvan);
         state.setString(11, juri1Ad);
         state.setString(12, juri2Unvan);
         state.setString(13, juri2Ad);
         state.setString(14, anahtarkelimeler[0]);
         state.setString(15, anahtarkelimeler[1]);
         state.setString(16, anahtarkelimeler[2]);
         state.setString(17, anahtarkelimeler[3]);
         state.setString(18, anahtarkelimeler[4]);
         state.setString(19, anahtarkelimeler[5]);
         state.setString(20,dosyaAdi);
         state.executeUpdate();
         
    }

    public static void main(String[] args) throws FileNotFoundException, IOException, SQLException {
        
      pdfreader pdf = new pdfreader();
    pdf.pdfoku("2018Arastirma2.pdf");
    
   
    }
    public static boolean containsChar(String s, char search) {
    if (s.length() == 0)
        return false;
    else
        return s.charAt(0) == search || containsChar(s.substring(1), search);
}
    public static String degistir(String s2,char c1,char c2){
        StringBuilder s3 = new StringBuilder(s2);
    for(int i=0;i<s2.length();i++){
    if(s2.charAt(i)==c1){
        
    s3.setCharAt(i, c2);
    s2=s2.replace(c1, c2);
       return s2;
    }
    }
   return null;
    }
}


/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package folder2;

import java.sql.SQLException;

/**
 *
 * @author Lenovo
 */
public class pdfveri {
    String yazar;
    String donem;
    String ders;
    String ozet;
    String baslik;
   static String danisman;
String aranan;

String ogrenci;
static String sorgutipi;
private String sorgu1veri;

    public String getSorgutipi() {
        return sorgutipi;
    }

    public void setSorgutipi(String sorgutipi) {
        this.sorgutipi = sorgutipi;
    }

  

    public String getSorgu1veri() {
        String temp=sorgu1veri;
         temp=temp.replace('ş','s');
                 temp=temp.replace('ı','i');
                 
         
        return temp;
    }

    public void setSorgu1veri(String sorgu1veri) {
        this.sorgu1veri = sorgu1veri;
    }

    public String getAranan() {
        
        return aranan;
    }
public static String sorgu2(String danisman,String donem,String ogrenci,String ders) throws SQLException{
veritabankatman dbk = new veritabankatman();
return dbk.sorgu2(danisman,donem,ogrenci,ders);
    
}
public static String[] sorgu1(String danisman, String sorgutipi, String sorgu1veri){
veritabankatman dbk = new veritabankatman();
return dbk.sorgu1(danisman,sorgutipi,sorgu1veri);
    
}
    public void setAranan(String aranan) {
        this.aranan = aranan;
    }

   
    public String getOgrenci() {
         ogrenci=ogrenci.replace('ş','s');
                 ogrenci=ogrenci.replace('ı','i');
        return ogrenci;
    }

    public void setOgrenci(String ogrenci) {
        this.ogrenci = ogrenci;
    }
    public String getYazar() {
         yazar=yazar.replace('ş','s');
                 yazar=yazar.replace('ı','i');
        return yazar;
    }


    public void setYazar(String yazar) {
        this.yazar = yazar;
    }

    public String getDonem() {
    
        return donem;
    }

    public void setDonem(String donem) {
        this.donem = donem;
    }

    public String getDers() {
         ders=ders.replace('ş','s');
                 ders=ders.replace('ı','i');
        return ders;
    }

    public void setDers(String ders) {
        this.ders = ders;
    }

    public String getOzet() {
        return ozet;
    }

    public void setOzet(String ozet) {
        this.ozet = ozet;
    }

    public String getBaslik() {
         baslik=baslik.replace('ş','s');
                 baslik=baslik.replace('ı','i');
        return baslik;
    }

    public void setBaslik(String baslik) {
        this.baslik = baslik;
    }

    public String getDanisman() {
         //danisman=danisman.replace('ş','s');
            //    danisman=danisman.replace('ı','i');
        return danisman;
    }

    public void setDanisman(String danisman) {
        this.danisman = danisman;
    }
    public static boolean containsChar(String s, char search) {
    if (s.length() == 0)
        return false;
    else
        return s.charAt(0) == search || containsChar(s.substring(1), search);
} 
}


/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package folder2;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;

/**
 *
 * @author Lenovo
 */
public class veritabankatman {
    private static Connection conn;
  static  String  dburl="jdbc:derby://localhost:1527/test;characterEncoding=utf8";
   static String user="test";
   static String pass ="123";
    public static Connection baglan(){
        try{
    Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
            System.out.println("baglanti basarili");  
            conn= DriverManager.getConnection(dburl, user, pass);
               }
        catch(Exception e){
            System.out.println("sorun var");
        }
        return conn;
    }
  public void kullaniciliste(){
  if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
  Statement stmt = conn.createStatement();
  ResultSet rs = stmt.executeQuery("select * from kullanici");
  
 // ResultSetMetaData rsmd= rs.getMetaData();
      System.out.println("isim\tsifre\ttip\t");
while(rs.next()){
    System.out.println(""+rs.getString(1)+" \t"+rs.getString(2)+" \t"+rs.getString(3)+" \t");

}
  }
  catch(Exception e){
  e.printStackTrace();
  } }  
   public void dnm(String kullanici, String sorguTipi, String girilenBilgi){
       String e3[]=new String[10];
       int i=0;
  if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
  Statement stmt = conn.createStatement();
  ResultSet rs = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " yazarAd like '%"+girilenBilgi+"%' AND danismanAd like '%"+kullanici+"%'");
  
 // ResultSetMetaData rsmd= rs.getMetaData();
      while(rs.next()){
          e3[i]=rs.getString(1);
    i++;
}
      System.out.println(e3[0]);
       System.out.println(e3[1]);
  }
  catch(Exception e){
  e.printStackTrace();
  } }  
 public static String pdfadi(String yazar){
     String e3=null;
 
 if (conn == null) {
            System.out.println("veritabani bagli degil");
            baglan();
        }
 try {
            Statement stmt = conn.createStatement();
              ResultSet rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " yazarAd like '%"+yazar+"%'");
            while (rs1.next()) {   
                e3=rs1.getString(1);
            }  
            } catch (SQLException e) {
                System.out.print("hata burda: " + e);

            }
      return e3;
 
 }
public static String sorgu2(String kullanici, String donem,String ogrenci,String ders) throws SQLException{
     String e3=null;
 
 if (conn == null) {
            System.out.println("veritabani bagli degil");
            baglan();
        }
 try {     
             Statement stmt = conn.createStatement();
             ResultSet rs1;
            if(tipkontrol(kullanici)==false){  // tip == egitmen ismi ise
              
              rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " danismanAd like '%"+kullanici+"%' AND yazarAd like '%"+ogrenci+"%' AND teslimDonemi like '%"+donem+"%'AND dersAd like '%"+ders+"%'");
            }
            else{
                rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " yazarAd like '%"+ogrenci+"%' AND teslimDonemi like '%"+donem+"%'AND dersAd like '%"+ders+"%'");
            }
            while (rs1.next()) {   
                e3=rs1.getString(1);
            }  
            } catch (SQLException e) {
                System.out.print("hata burda: " + e);

            }
      return e3;
 
 }
 public static String[] sorgu1(String kullanici, String sorguTipi, String girilenBilgi){
        System.out.println("girdi ");
        String e3[]=new String[10];
       int i=0;

            
  if (conn == null) {
            System.out.println("veritabani bagli degil");
            baglan();
        }
 if( "yazar".equals(sorguTipi)){
        try {
             Statement stmt = conn.createStatement();
             ResultSet rs1;
            if(tipkontrol(kullanici)==false){  // tip == egitmen ismi ise
           
              rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " yazarAd like '%"+girilenBilgi+"%' AND danismanAd like '%"+kullanici+"%'");
            }
            else                               // tip == yonetici ise
            {
                rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " yazarAd like '%"+girilenBilgi+"%'");
            }
            
       while (rs1.next()) {   
                e3[i]=rs1.getString(1);
                 i++;

             //   System.out.println("buraya girdi");
       }  
            } catch (SQLException e) {
                System.out.print("hata burda: " + e);

            }
            
      return e3;
 }
 
 else if(sorguTipi.equals("ders")){
        try {
         //   String sql = "select * from pdfBilgiler where"+
         //             " dersAd like '%"+girilenBilgi+"%' AND danismanAd like '%"+kullanici+"%'";
         //   PreparedStatement pst = conn.prepareStatement(sql);
          //  ResultSet rs1 = pst.executeQuery();
            Statement stmt = conn.createStatement();
            ResultSet rs1;
            if(tipkontrol(kullanici)==false){                     // tip == egitmen ismi ise
            String sql= "select pdfad from pdfBilgiler where"+
                " dersAd like '%"+girilenBilgi+"%' and danismanAd like '%"+kullanici+"%'";
              rs1 = stmt.executeQuery(sql);
              //   System.out.println("e2:"+e2);
              //   System.out.println(girilenBilgi+" "+kullanici+" "+sorguTipi);
              //    System.out.println("sql"+sql);
            }
            else{                                                // tip == yonetici ise
                 String sql= "select pdfad from pdfBilgiler where"+
                " dersAd like '%"+girilenBilgi+"%'";
              rs1 = stmt.executeQuery(sql);
               //  System.out.println("e2:"+e2);
               //  System.out.println(girilenBilgi+" "+kullanici+" "+sorguTipi);
               //   System.out.println("sql"+sql);
            }   
       while (rs1.next()) {   
          //  System.out.println("e2_1:"+e2);
            //    e2=rs1.getString("pdfad");
             //    System.out.println("e2_2:"+e2);
           e3[i]=rs1.getString(1);
    i++;

            }  
            } catch (SQLException e) {
                System.out.print("hata burda: " + e);

            }
        
        
       
            
      return e3;
 }
 
 else if("proje".equals(sorguTipi)){
        try {
            Statement stmt = conn.createStatement();
            ResultSet rs1;
            if(tipkontrol(kullanici)==false){                     // tip == egitmen ismi ise
              rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " projeBaslik like '%"+girilenBilgi+"%' AND danismanAd like '%"+kullanici+"%'");
            }
            else{                                                 // tip == yonetici ise
                 rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " projeBaslik like '%"+girilenBilgi+"%'");
            }
       while (rs1.next()) {   
               e3[i]=rs1.getString(1);
    i++;

            }  
            } catch (SQLException e) {
                System.out.print("hata burda: " + e);

            }
            
      return e3;
 }
 
 else if("anahtarkelime".equals(sorguTipi)){
        try {
              Statement stmt = conn.createStatement();
              ResultSet rs1;
              if(tipkontrol(kullanici)==false){                     // tip == egitmen ismi ise
               rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " (anahtar1 like '%"+girilenBilgi+"%' OR anahtar2 like '%"+girilenBilgi+"%' OR "
                      + "anahtar3 like '%"+girilenBilgi+"%' OR anahtar4 like '%"+girilenBilgi+"%' OR "
                      + "anahtar5 like '%"+girilenBilgi+"%' OR anahtar6 like '%"+girilenBilgi+"%')"
                      + "AND danismanAd like '%"+kullanici+"%' ");
              }
              else{                                                // tip == yonetici ise
                 rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where"+
                      " (anahtar1 like '%"+girilenBilgi+"%' OR anahtar2 like '%"+girilenBilgi+"%' OR "
                      + "anahtar3 like '%"+girilenBilgi+"%' OR anahtar4 like '%"+girilenBilgi+"%' OR "
                      + "anahtar5 like '%"+girilenBilgi+"%' OR anahtar6 like '%"+girilenBilgi+"%')"); 
              }
       while (rs1.next()) {   
                e3[i]=rs1.getString(1);
    i++;

            }  
            } catch (SQLException e) {
                System.out.print("hata burda: " + e);

            }
            
      return e3;
      
 
 }
  else if("donem".equals(sorguTipi)){
        try {
            System.out.println("donem");
             Statement stmt = conn.createStatement();
              ResultSet rs1;
              if(tipkontrol(kullanici)==false){                     // tip == egitmen ismi ise
               rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where "+
                      " teslimDonemi like '%"+girilenBilgi+"%' "
                      + "AND danismanAd like '%"+kullanici+"%' ");
              }
              else{
                  rs1 = stmt.executeQuery("select pdfad from pdfBilgiler where "+
                      " teslimDonemi like '%"+girilenBilgi+"%' ");
              }
       while (rs1.next()) {   
               e3[i]=rs1.getString(1);
    i++;

            }  
            } catch (SQLException e) {
                System.out.print("hata burdaaaa: " + e);

            }
            
      return e3;
      
 
 }
        return null;
}
 
  public static boolean kullanicikontrol(String isim,String sifre){
   if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
       Statement stmt = conn.createStatement();
  ResultSet rs = stmt.executeQuery("select sifre from kullanici where isim ='"+isim+"'");
  rs.next();
  return sifre.equals(rs.getString(1));
  }
  catch(Exception e){
  e.printStackTrace();
  } 
  return false;
  }
  public static boolean tipkontrol(String isim){
      String tip="yonetici";
   if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
       Statement stmt = conn.createStatement();
  ResultSet rs = stmt.executeQuery("select tip from kullanici where isim ='"+isim+"'");
  rs.next();
  return tip.equals(rs.getString(1));
  }
  catch(Exception e){
  e.printStackTrace();
  } 
  return false;
  }
  public void kullaniciekle(String isim ,String sifre,String tip){
  if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
  Statement stmt = conn.createStatement();
  stmt.executeUpdate("insert into kullanici values('"+isim+"','"+sifre+"','"+tip+"')");
  }
   catch(Exception e){
  e.printStackTrace();
  } 
  }
 public void kullanicisil(String isim ){
    
  if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
  Statement stmt = conn.createStatement();
  stmt.executeUpdate("delete from kullanici where isim ='"+isim+"'");
  }
   catch(Exception e){
  e.printStackTrace();
  } 
  }
 public void kullaniciupdate(String isim,String isim2,String sifre2,String tip2 ){
  if(conn==null){
      System.out.println("veritabani bagli degil");
      baglan();
  }
  try{
  Statement stmt = conn.createStatement();
  stmt.executeUpdate("update kullanici set isim='"+isim2+"' ,sifre='"+sifre2+"' ,tip='"+tip2+"'where isim ='"+isim+"'");
  }
   catch(Exception e){
  e.printStackTrace();
  } 
  }
  public static void main(String args[]) throws SQLException{
  veritabankatman dbk2= new veritabankatman();
 
  
      System.out.println(dbk2.sorgu1("sevinç ilhan omurca","donem","2018")[1]);
      
  

 
  }
  
}


/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package folder2;

/**
 *
 * @author Lenovo
 */
public class yonetici {
    String isim;
    String sifre;
    String tip;
    String isim2;
    String sifre2;
    String tip2;

    public String getSifre() {
        return sifre;
    }

    public void setSifre(String sifre) {
        this.sifre = sifre;
    }
    public yonetici(){
   
    }
    
public boolean sifrekontrol(){ 
    veritabankatman dbk = new veritabankatman();
    return dbk.kullanicikontrol(isim, sifre);

}
public boolean tipkontrol(){ 
    veritabankatman dbk = new veritabankatman();
    return dbk.tipkontrol(isim);

}
public void ekle(String isim,String sifre,String tip){
 veritabankatman dbk = new veritabankatman();
 dbk.kullaniciekle(isim, sifre, tip);
}
public void sil(String isim){
veritabankatman dbk = new veritabankatman();
dbk.kullanicisil(isim);
}
public void update(String isim,String isim2,String sifre2,String tip2){
veritabankatman dbk = new veritabankatman();
dbk.kullaniciupdate(isim,isim2,sifre2,tip2);
}

    public String getIsim2() {
        return isim2;
    }

    public void setIsim2(String isim2) {
        this.isim2 = isim2;
    }

    public String getSifre2() {
        return sifre2;
    }

    public void setSifre2(String sifre2) {
        this.sifre2 = sifre2;
    }

    public String getTip2() {
        return tip2;
    }

    public void setTip2(String tip2) {
        this.tip2 = tip2;
    }

    public String getTip() {
        return tip;
    }

    public void setTip(String tip) {
        this.tip = tip;
    }
    public String getIsim() {
        return isim;
    }

    public void setIsim(String isim) {
        this.isim = isim;
    }
    public static void main(String[] args) {
        yonetici y=new yonetici();
        y.setIsim("ayse");
        y.setSifre("nur");
        System.out.println(y.sifrekontrol());
    }
}


<%-- 
    Document   : yonetim2
    Created on : Dec 6, 2021, 9:31:08 PM
    Author     : Lenovo
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1></h1>
        
        <jsp:useBean id="bean2" scope="session" class="folder2.yonetici" />
        <jsp:setProperty name="bean2" property="isim"  />
        <jsp:setProperty name="bean2" property="sifre"  />
        <jsp:setProperty name="bean2" property="tip"  />
         <jsp:getProperty name="bean2" property="isim" />
        <jsp:getProperty name="bean2" property="sifre" />
         <jsp:getProperty name="bean2" property="tip" />
        <%  bean2.ekle(bean2.getIsim(),bean2.getSifre(),bean2.getTip()); 
String redirectURL = "http://localhost:25693/WebApplication1/islemler.jsp";
    response.sendRedirect(redirectURL);%>
%>
       
    </body>
</html>


<!DOCTYPE html>

<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    
    <head>
        <title></title>
        
      <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    
    <body>
         <link rel="stylesheet" type="text/css" href="./style.css" />
    
        <div></div>
        
        <div class="container"></div>
        
        
        
       <form action="yonetim.jsp">
        <h1> <label for="isim"><b>Kullanıcı Adı</b></label></h1>
        <h1>  <input type="text" name="isim" value="" /></h1>
         <h1>  <br></h1>
         <h1> <label for="sifre"><b>Şifre</b></label></h1>
         <h1> <input type="password" name="sifre" value="" /></h1>
         <h1> <br></h1>
         <h1> <input type="submit" value="GİRİŞ YAP" /></h1>
         <h1>  <br></h1>
          </form>
       
    </body>
</html>


<%-- 
    Document   : islemler
    Created on : Dec 7, 2021, 2:33:52 PM
    Author     : Lenovo
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="./style.css" rel="stylesheet" type="text/css">
        <title>JSP Page</title>
    </head>
    <body>
        <h4>
             KULLANICI EKLE 
             <br>
<form action="ekle.jsp"><label for="isim">isim</label>
      <br>
  <input type="text" name="isim" value="" />
    <br>
  <label for="sifre">şifre</label>
    <br>
 <input type="password" name="sifre" value="" />
   <br>
<label for="tip"></label>

  kullanıcı
<input type="radio" name="tip" value="kullanici" />
<br>
yönetici
<input type="radio" name="tip" value="yonetici" />
   <br>
  <input type="submit" value="ekle" />  </form>
 </h4>
        <h2>KULLANICI SİL
             <br>
<form action="sil.jsp">
    <label for="isim">isim</label>
     <br>
  <input type="text" name="isim" value="" />
   <br>
    <input type="submit" value="sil" />
     </form></h2>

        <h3>  KULLANICI GÜNCELLE<br>
         (güncellemek istediğiniz kullanıcıyı giriniz)
              <form action="update.jsp">
                  <br>
          <label for="isim">eski isim</label>
          <br>
  <input type="text" name="isim" value="" />
  <br>
   <label for="isim2">yeni isim</label>
   <br>
  <input type="text" name="isim2" value="" />
  <br>
  <label for="sifre2">yeni şifre</label>
  <br>
 <input type="password" name="sifre2" value="" />
 <br>
<label for="tip2"></label>
<br>
kullanıcı
<input type="radio" name="tip2" value="kullanici" />
<br>
yönetici
<input type="radio" name="tip2" value="yonetici" />
<br>
 <br>
  <input type="submit" value="güncelle" /> 
   </form></h3>
          
        
        
    </body>
</html>


<%@page contentType="text/html;charset=ISO-8859-9" pageEncoding="ISO-8859-9"%>

<!DOCTYPE html>

<html>

    <head>

        
<link href="./style.css" rel="stylesheet" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <h1> <title></title></h1>

    </head>

    <body>
  <%
  request.setCharacterEncoding("UTF-8");
 
%>
        <h4> 
        SORGU1
          <br>
          <form action="sorgu1.jsp">
        <select name="sorgutipi" size="1">
            <option value="yazar">yazar</option>
            <option value="ders">ders</option>
            <option value="proje">proje</option>
            <option value="anahtarkelime">anahtar kelimeler</option>
            <option value="donem">dönem</option>
        </select>
        <br>
        <input type="text" name="sorgu1veri" value="" />
        <br>
        <input type="submit" value="sorgula" />
        <br><br> 
          </form></h4>
        <h2>  SORGU2
         <form action="sorgu2.jsp">
       <label for="isim">dönem</label>
      <input type="text" name="donem"  />
     <label for="isim">ögrenci</label>
  <input type="text" name="ogrenci"  />
    <label for="isim">ders</label>
  <input type="text" name="ders"  />
         <input type="submit" value="sorgula" />
         
         </form>
        </h2> 

        <h3> <form name="main1"  method="get" action="islemler.jsp">
        <input type="submit" name="ter" value="kullanıcı işlemleri" >
            </form> </h3>
    </body>

</html> 



<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.Connection"%>
<%@page import="folder2.veritabankatman"%>
<%@page import="folder2.pdfreader"%>
<%@page import="com.oreilly.servlet.MultipartRequest" %>

<%

    MultipartRequest m=new MultipartRequest(request, "C:/Users/Lenovo/Documents/NetBeansProjects/WebApplication1/web");

    out.println("Successfully Uploaded..");
    String s=m.getOriginalFileName("fname");
    out.println(s);
    
    
 pdfreader pdf = new pdfreader();
    pdf.pdfoku(s);
     String redirectURL = "http://localhost:25693/WebApplication1/secondpage.jsp";
    response.sendRedirect(redirectURL);
   
    %> 


<!DOCTYPE html>

<html>

    <head>

        <style type="text/css">
          body {background-color: yellowgreen;}           
        </style>
<link href="./style.css" rel="stylesheet" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


    <h1> <title>File Upload App in JSP</title></h1>

    </head>

    <body>
  
        <h4>  <form action="sorgu1.jsp">
        SORGU1
          <br>       
        <select name="sorgutipi" size="1">
            <option value="yazar">yazar</option>
            <option value="ders">ders</option>
            <option value="proje">proje adi</option>
            <option value="anahtarkelime">anahtar kelimeler</option>
            <option value="donem">dönem</option>
        </select>
        <br>
        <input type="text" name="sorgu1veri" value="" />
        <br>
        <input type="submit" value="sorgula" />
        <br></form>
             </h4>
        <h2>  SORGU2
         <form action="sorgu2.jsp">
     <label for="isim">dönem:</label>
      <input type="text" name="donem"  />
      <br>
     <label for="isim">ögrenci:</label>
  <input type="text" name="ogrenci"  />
    <br>
      <label for="isim">  ders  :</label>
  <input type="text" name="ders"  />
    <br>
         <input type="submit" value="sorgula" />
         
         </form>
        </h2> 

           <h3> <form action="process.jsp" method="post" enctype="multipart/form-data"> 
                <h1>  <b>PDF EKLE:</b> <input type="file" name="fname"><br/>

             <input type="submit" value="Upload"></h1>

        </form>
               
              </h3>
    </body>

</html> 


<%-- 
    Document   : sil
    Created on : Dec 7, 2021, 12:18:11 PM
    Author     : Lenovo
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
         <jsp:useBean id="bean3" scope="session" class="folder2.yonetici" />
        <jsp:setProperty name="bean3" property="isim"  />
         <jsp:getProperty name="bean3" property="isim" />
         <%  bean3.sil(bean3.getIsim());  
String redirectURL = "http://localhost:25693/WebApplication1/islemler.jsp";
    response.sendRedirect(redirectURL);%>
        
    </body>
</html>


<%-- 
    Document   : sorgu1
    Created on : Dec 8, 2021, 4:45:57 PM
    Author     : Lenovo
--%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@page import="folder2.veritabankatman"%>

<%@ page import="java.io.File" %>
<%@ page import="org.apache.commons.io.FileUtils" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="./style.css" rel="stylesheet" type="text/css">
        <title>JSP Page</title>
    </head>  
   
 
      <jsp:useBean id="firstbean" scope="session" class="folder2.yonetici" />
    
         <jsp:useBean id="bean6" scope="session" class="folder2.pdfveri" />
         <jsp:setProperty name="bean6" property="sorgutipi"  />
         <jsp:setProperty name="bean6" property="sorgu1veri" />
    
         
        <% 
             veritabankatman dbk2= new veritabankatman();
          
          String isim=firstbean.getIsim();
           bean6.setDanisman(isim);
            //out.println(bean6.getDanisman()+","+bean6.getSorgutipi()+","+ bean6.getSorgu1veri());
            String a=firstbean.getIsim();
                    String b=bean6.getSorgutipi();
                            String c=bean6.getSorgu1veri();
                            out.println(c);
                            out.println(bean6.getDanisman());
                            out.println(b);
                     
   String pdfisim2[]=null;
    //  String s2=dbk2.sorgu1("sevinc ilhan omurca","yazar","huseyin dalyan ");
      if(b.charAt(0)=='y'){ pdfisim2= bean6.sorgu1(bean6.getDanisman(),"yazar",bean6.getSorgu1veri());}
      else if(b.charAt(1)=='e'){ pdfisim2= bean6.sorgu1(bean6.getDanisman(),"ders",bean6.getSorgu1veri());}       
        else if(b.charAt(0)=='p'){ pdfisim2= bean6.sorgu1(bean6.getDanisman(),"proje",bean6.getSorgu1veri());}
       else  if(b.charAt(0)=='a'){ pdfisim2= bean6.sorgu1(bean6.getDanisman(),"anahtarkelime",bean6.getSorgu1veri());}
        else if(b.charAt(4)=='m'){ pdfisim2= bean6.sorgu1(bean6.getDanisman(),"donem",bean6.getSorgu1veri());}
        %>
      
         <h3>
            PDF'i açmak için tıklayın...
            <br>
            <a href="<%= pdfisim2[0] %>" ><%= pdfisim2[0] %></a>  
             <br>
            <a href="<%= pdfisim2[1] %>" ><%= pdfisim2[1] %></a> 
             <br>
            <a href="<%= pdfisim2[2] %>" ><%= pdfisim2[2] %></a> 
             <br>
            <a href="<%= pdfisim2[3] %>" ><%= pdfisim2[3] %></a>  
             <br>
            <a href="<%= pdfisim2[4] %>" ><%= pdfisim2[4] %></a>  
         </h3>

        
    
</html>



<%-- 
    Document   : sorgu2
    Created on : Dec 8, 2021, 4:47:30 PM
    Author     : Lenovo
--%>


<%@page import="java.net.URLDecoder"%>
<%@page import="java.net.URLEncoder"%>
<%@page import="folder2.veritabankatman"%>

<!DOCTYPE html>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="./style.css" rel="stylesheet" type="text/css">
        <title>JSP Page</title>
    </head>
    <body>
   
      <jsp:useBean id="firstbean" scope="session" class="folder2.yonetici" />
      <jsp:useBean id="bean5" scope="session" class="folder2.pdfveri" />
      <jsp:setProperty name="bean5" property="donem" />
      <jsp:setProperty name="bean5" property="ders"/>
      <jsp:setProperty name="bean5" property="ogrenci"/>
      
        <% 
          
         
          
          String a1=request.getParameter("donem");
          String a2=request.getParameter("ogrenci");
          String a3=request.getParameter("ders");
       
          String isim=firstbean.getIsim();
           bean5.setDanisman(isim);
         
        
            String pdfisim=(bean5.sorgu2(bean5.getDanisman(),bean5.getDonem(),bean5.getOgrenci(),bean5.getDers()));
         
             
        %>
      
        
        
        <h1>
            PDF'i açmak için tıklayın...
            <br>
            <a href="<%= pdfisim %>" ><%= pdfisim %></a>  
         </h1>
        
    </body>
</html>



*{
    box-sizing: border-box;
}

*:focus{
    outline: none;
}

body{
    font-family: sans-serif;
    padding: 50px;
    background-image: url("https://coolbackgrounds.io/images/backgrounds/index/sea-edge-79ab30e2.png") ;

 background-position: center;
}

.form{
    margin: 20px auto;
    width: 300px;
    padding: 50px;
    background-color: #fff;
}

.input-conteiner{
    padding: 5px;
    margin: 10px auto;
}

input{
    width: 200px;
    height: 30px;
}

input:focus{
    border: midnightblue;
}

h1{
    text-align: center;
    color: whitesmoke;
    
  
    
}
h2{
    text-align: center;
    color: whitesmoke;
    position: fixed;
  left: 900px;
  top: 100px;
}
h3{
    text-align: center ;
     position: absolute;
  left: 500px;
  top: 350px;
   
}
h4{
    text-align: center;
    color: whitesmoke;
    position: absolute;
  left: 200px;
  top: 100px;
}
.btn{
    margin: 5px;
    width: 200px;
    height: 30px;
    margin-left: 5px;
    background-color: #FFFE00;
    border: 1px solid grey;
}



<%-- 
    Document   : update
    Created on : Dec 7, 2021, 2:37:01 PM
    Author     : Lenovo
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1> </h1>
        <jsp:useBean id="bean4" scope="session" class="folder2.yonetici" />
        <jsp:setProperty name="bean4" property="isim"  />
        <jsp:setProperty name="bean4" property="isim2"  />
        <jsp:setProperty name="bean4" property="sifre2"  />
         <jsp:setProperty name="bean4" property="tip2"  />
         <jsp:getProperty name="bean4" property="isim" />
         <jsp:getProperty name="bean4" property="isim2" />
         <jsp:getProperty name="bean4" property="sifre2" />
         <jsp:getProperty name="bean4" property="tip2" />
        <%                     
        bean4.update(bean4.getIsim(),bean4.getIsim2(),bean4.getSifre2(),bean4.getTip2());
        String redirectURL = "http://localhost:25693/WebApplication1/islemler.jsp";
    response.sendRedirect(redirectURL);
    
        %>
    </body>
</html>



<%-- 
    Document   : yonetim
    Created on : Dec 4, 2021, 10:11:54 PM
    Author     : Lenovo
--%>

<!DOCTYPE html>
<%@page contentType="text/html" pageEncoding="ISO-8859-9"%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
       <%
  request.setCharacterEncoding("UTF-8");
 
%>
        <jsp:useBean id="firstbean" scope="session" class="folder2.yonetici" />
        <jsp:setProperty name="firstbean" property="isim"  />
        <jsp:setProperty name="firstbean" property="sifre"  />
     
        <jsp:getProperty name="firstbean" property="isim" />
        <jsp:getProperty name="firstbean" property="sifre" />
        
        <% if(firstbean.sifrekontrol()){
           if(firstbean.tipkontrol() ){
            String redirectURL = "http://localhost:25693/WebApplication1/page3.jsp";
    response.sendRedirect(redirectURL);}
           else{
        out.println("Sisteme hosgeldiniz");
         String redirectURL = "http://localhost:25693/WebApplication1/secondpage.jsp";
    response.sendRedirect(redirectURL);}
        }else{
            out.println("Sifreniz hatal?");
            String redirectURL = "http://localhost:25693/WebApplication1/index.html";
    response.sendRedirect(redirectURL);
        }
       %>
      
    </body>
</html>


